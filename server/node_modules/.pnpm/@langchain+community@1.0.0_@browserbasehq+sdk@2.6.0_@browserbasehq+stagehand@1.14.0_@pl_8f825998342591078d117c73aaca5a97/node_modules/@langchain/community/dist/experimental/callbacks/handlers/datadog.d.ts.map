{"version":3,"file":"datadog.d.ts","names":["BaseCallbackHandlerInput","BaseTracer","Run","Document","KVMap","DatadogLLMObsSpanKind","DatadogLLMObsIO","DatadogLLMObsSpan","DatadogLLMObsRequestBody","FormatDocument","Record","Metadata","DatadogLLMObsTracerFields","DatadogLLMObsTracer","Promise"],"sources":["../../../../src/experimental/callbacks/handlers/datadog.d.ts"],"sourcesContent":["import { BaseCallbackHandlerInput } from \"@langchain/core/callbacks/base\";\nimport { BaseTracer, Run } from \"@langchain/core/tracers/base\";\nimport { Document } from \"@langchain/core/documents\";\nimport { KVMap } from \"langsmith/schemas\";\nexport type DatadogLLMObsSpanKind = \"llm\" | \"workflow\" | \"agent\" | \"tool\" | \"task\" | \"embedding\" | \"retrieval\";\nexport type DatadogLLMObsIO = {\n    value: string;\n} | {\n    documents: {\n        text?: string;\n        id?: string;\n        name?: string;\n        score: string | number;\n    }[];\n} | {\n    messages: {\n        content: string;\n        role?: string;\n    }[];\n};\nexport interface DatadogLLMObsSpan {\n    span_id: string;\n    trace_id: string;\n    parent_id: string;\n    session_id?: string;\n    name: string;\n    start_ns: number;\n    duration: number;\n    error: number;\n    status: string;\n    tags?: string[];\n    meta: {\n        kind: DatadogLLMObsSpanKind;\n        model_name?: string;\n        model_provider?: string;\n        temperature?: string;\n        input: DatadogLLMObsIO;\n        output: DatadogLLMObsIO | undefined;\n    };\n    metrics: {\n        [key: string]: number;\n    };\n}\nexport interface DatadogLLMObsRequestBody {\n    data: {\n        type: \"span\";\n        attributes: {\n            ml_app: string;\n            tags: string[];\n            spans: DatadogLLMObsSpan[];\n            session_id?: string;\n        };\n    };\n}\nexport type FormatDocument<\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nMetadata extends Record<string, any> = Record<string, any>> = (document: Document<Metadata>) => {\n    text: string;\n    id: string;\n    name: string;\n    score: number;\n};\nexport interface DatadogLLMObsTracerFields extends BaseCallbackHandlerInput {\n    mlApp: string;\n    userId?: string;\n    userHandle?: string;\n    sessionId?: string;\n    env?: string;\n    service?: string;\n    tags?: Record<string, string | undefined>;\n    ddApiKey?: string;\n    ddLLMObsEndpoint?: string;\n    formatDocument?: FormatDocument;\n}\nexport declare class DatadogLLMObsTracer extends BaseTracer implements DatadogLLMObsTracerFields {\n    name: string;\n    ddLLMObsEndpoint?: string;\n    protected endpoint: string;\n    protected headers: Record<string, string>;\n    mlApp: string;\n    sessionId?: string;\n    tags: Record<string, string | undefined>;\n    formatDocument?: FormatDocument;\n    constructor(fields: DatadogLLMObsTracerFields);\n    protected persistRun(_run: Run): Promise<void>;\n    protected convertRunToDDSpans(run: Run): DatadogLLMObsSpan[];\n    protected formatRequestBody(spans: DatadogLLMObsSpan[]): DatadogLLMObsRequestBody;\n    protected uuidToBigInt(uuid: string): string;\n    protected milisecondsToNanoseconds(ms: number): number;\n    protected toDatadogSpanKind(kind: string): DatadogLLMObsSpanKind | null;\n    protected transformInput(inputs: KVMap, spanKind: DatadogLLMObsSpanKind): DatadogLLMObsIO;\n    protected transformOutput(outputs: KVMap | undefined, spanKind: DatadogLLMObsSpanKind): {\n        output: DatadogLLMObsIO | undefined;\n        tokensMetadata: Record<string, number>;\n    };\n    protected langchainRunToDatadogLLMObsSpan(run: Run): DatadogLLMObsSpan | null;\n}\n"],"mappings":";;;;;;;;;KAIYK,qBAAAA;KACAC,eAAAA;;;;;;;;;;;;IADAD,IAAAA,CAAAA,EAAAA,MAAAA;EACAC,CAAAA,EAAAA;AAeZ,CAAA;AAAkC,UAAjBC,iBAAAA,CAAiB;EAAA,OAYpBF,EAAAA,MAAAA;EAAqB,QAIpBC,EAAAA,MAAAA;EAAe,SACdA,EAAAA,MAAAA;EAAe,UAAA,CAAA,EAAA,MAAA;EAMdE,IAAAA,EAAAA,MAAAA;EAWLC,QAAAA,EAAAA,MAAAA;EAAc,QAAA,EAAA,MAAA;EAAA,KAETC,EAAAA,MAAAA;EAAM,MAAgBA,EAAAA,MAAAA;EAAM,IAAqCC,CAAAA,EAAAA,MAAAA,EAAAA;EAAQ,IAAjBR,EAAAA;IAAQ,IAAA,EAxBnEE,qBAwBmE;IAMhEO,UAAAA,CAAAA,EAAAA,MAAAA;IAAyB,cAAA,CAAA,EAAA,MAAA;IAO/BF,WAAAA,CAAAA,EAAAA,MAAAA;IAGUD,KAAAA,EApCNH,eAoCMG;IAV8BT,MAAAA,EAzBnCM,eAyBmCN,GAAAA,SAAAA;EAAwB,CAAA;EAYtDa,OAAAA,EAAAA;IAAmB,CAAA,GAAA,EAAA,MAAA,CAAA,EAAA,MAAA;EAAA,CAAA;;AAQnBJ,UAvCJD,wBAAAA,CAuCIC;EAAc,IACXG,EAAAA;IACOV,IAAAA,EAAAA,MAAAA;IAAMY,UAAAA,EAAAA;MACEZ,MAAAA,EAAAA,MAAAA;MAAMK,IAAAA,EAAAA,MAAAA,EAAAA;MACNA,KAAAA,EArCpBA,iBAqCoBA,EAAAA;MAAsBC,UAAAA,CAAAA,EAAAA,MAAAA;IAGdH,CAAAA;EAAqB,CAAA;;AACUC,KApClEG,cAoCkEH;;iBAlC7DI,MAmCmDL,CAAAA,MAAAA,EAAAA,GAAAA,CAAAA,GAnC7BK,MAmC6BL,CAAAA,MAAAA,EAAAA,GAAAA,CAAAA,CAAAA,GAAAA,CAAAA,QAAAA,EAnCKF,QAmCLE,CAnCcM,QAmCdN,CAAAA,EAAAA,GAAAA;EAAqB,IACzEC,EAAAA,MAAAA;EAAe,EAAA,EACPI,MAAAA;EAAM,IAEqBR,EAAAA,MAAAA;EAAG,KAAGK,EAAAA,MAAAA;CAAiB;AArBHK,UAZtDA,yBAAAA,SAAkCZ,wBAYoBY,CAAAA;EAAyB,KAAA,EAAA,MAAA;;;;;;SALrFF;;;mBAGUD;;cAEAI,mBAAAA,SAA4BZ,UAAAA,YAAsBW;;;;qBAIhDF;;;QAGbA;mBACWD;sBACGG;6BACOV,MAAMY;qCACEZ,MAAMK;qCACNA,sBAAsBC;;;6CAGdH;mCACVD,iBAAiBC,wBAAwBC;qCACvCF,6BAA6BC;YACpDC;oBACQI;;iDAE2BR,MAAMK"}