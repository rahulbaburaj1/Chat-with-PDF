{"version":3,"file":"ibm.d.cts","names":["AIMessageChunk","BaseMessage","BaseLanguageModelInput","StructuredOutputMethodOptions","CallbackManagerForLLMRun","BaseChatModel","BaseChatModelCallOptions","BindToolsInput","LangSmithParams","BaseChatModelParams","ChatGenerationChunk","ChatResult","DeploymentsTextChatParams","RequestCallbacks","TextChatParameterTools","TextChatParams","TextChatResponseFormat","TextChatToolCall","WatsonXAI","Runnable","InteropZodType","Neverify","WatsonxAuth","WatsonxChatBasicOptions","WatsonxDeployedParams","WatsonxParams","WatsonxDeltaStream","WatsonxCallParams","Omit","Partial","WatsonxCallDeployedParams","WatsonxCallOptionsChat","WatsonxCallOptionsDeployedChat","ChatWatsonxToolType","ChatWatsonxInput","ChatWatsonxDeployedInput","ChatWatsonxConstructor","ChatWatsonx","CallOptions","NonNullable","T","Promise","AsyncGenerator","Record","RunOutput"],"sources":["../../src/chat_models/ibm.d.ts"],"sourcesContent":["import { AIMessageChunk, type BaseMessage } from \"@langchain/core/messages\";\nimport { BaseLanguageModelInput, StructuredOutputMethodOptions } from \"@langchain/core/language_models/base\";\nimport { CallbackManagerForLLMRun } from \"@langchain/core/callbacks/manager\";\nimport { BaseChatModel, BaseChatModelCallOptions, BindToolsInput, LangSmithParams, type BaseChatModelParams } from \"@langchain/core/language_models/chat_models\";\nimport { ChatGenerationChunk, ChatResult } from \"@langchain/core/outputs\";\nimport { DeploymentsTextChatParams, RequestCallbacks, TextChatParameterTools, TextChatParams, TextChatResponseFormat, TextChatToolCall } from \"@ibm-cloud/watsonx-ai/dist/watsonx-ai-ml/vml_v1.js\";\nimport { WatsonXAI } from \"@ibm-cloud/watsonx-ai\";\nimport { Runnable } from \"@langchain/core/runnables\";\nimport { InteropZodType } from \"@langchain/core/utils/types\";\nimport { Neverify, WatsonxAuth, WatsonxChatBasicOptions, WatsonxDeployedParams, WatsonxParams } from \"../types/ibm.js\";\nexport interface WatsonxDeltaStream {\n    role?: string;\n    content?: string;\n    tool_calls?: TextChatToolCall[];\n    refusal?: string;\n}\nexport interface WatsonxCallParams extends Partial<Omit<TextChatParams, \"modelId\" | \"toolChoice\" | \"messages\">> {\n}\nexport interface WatsonxCallDeployedParams extends DeploymentsTextChatParams {\n}\nexport interface WatsonxCallOptionsChat extends Omit<BaseChatModelCallOptions, \"stop\">, WatsonxCallParams, WatsonxChatBasicOptions {\n    promptIndex?: number;\n    tool_choice?: TextChatParameterTools | string | \"auto\" | \"any\";\n}\nexport interface WatsonxCallOptionsDeployedChat extends Omit<BaseChatModelCallOptions, \"stop\">, WatsonxCallDeployedParams, WatsonxChatBasicOptions {\n    promptIndex?: number;\n    tool_choice?: TextChatParameterTools | string | \"auto\" | \"any\";\n}\ntype ChatWatsonxToolType = BindToolsInput | TextChatParameterTools;\nexport interface ChatWatsonxInput extends BaseChatModelParams, WatsonxParams, WatsonxCallParams, Neverify<Omit<DeploymentsTextChatParams, \"signal\" | \"headers\">> {\n}\nexport interface ChatWatsonxDeployedInput extends BaseChatModelParams, WatsonxDeployedParams, Neverify<TextChatParams> {\n}\nexport type ChatWatsonxConstructor = BaseChatModelParams & Partial<WatsonxParams> & WatsonxDeployedParams & WatsonxCallParams;\nexport declare class ChatWatsonx<CallOptions extends WatsonxCallOptionsChat = WatsonxCallOptionsChat | WatsonxCallOptionsDeployedChat> extends BaseChatModel<CallOptions> implements ChatWatsonxConstructor {\n    static lc_name(): string;\n    lc_serializable: boolean;\n    get lc_secrets(): {\n        [key: string]: string;\n    };\n    get lc_aliases(): {\n        [key: string]: string;\n    };\n    getLsParams(options: this[\"ParsedCallOptions\"]): LangSmithParams;\n    model?: string;\n    version: string;\n    maxTokens?: number;\n    maxCompletionTokens?: number;\n    maxRetries: number;\n    serviceUrl: string;\n    spaceId?: string;\n    projectId?: string;\n    idOrName?: string;\n    frequencyPenalty?: number;\n    logprobs?: boolean;\n    topLogprobs?: number;\n    n?: number;\n    presencePenalty?: number;\n    temperature?: number;\n    topP?: number;\n    timeLimit?: number;\n    maxConcurrency?: number;\n    service: WatsonXAI;\n    responseFormat?: TextChatResponseFormat;\n    streaming: boolean;\n    watsonxCallbacks?: RequestCallbacks;\n    constructor(fields: (ChatWatsonxInput | ChatWatsonxDeployedInput) & WatsonxAuth);\n    _llmType(): string;\n    invocationParams(options: this[\"ParsedCallOptions\"]): {\n        maxTokens: number | undefined;\n        maxCompletionTokens: number | undefined;\n        temperature: number | undefined;\n        timeLimit: number | undefined;\n        topP: number | undefined;\n        presencePenalty: number | undefined;\n        n: number | undefined;\n        topLogprobs: number | undefined;\n        logprobs: boolean | NonNullable<CallOptions[\"logprobs\"]> | undefined;\n        frequencyPenalty: number | undefined;\n        tools: TextChatParameterTools[] | undefined;\n        responseFormat: CallOptions[\"responseFormat\"] | undefined;\n    };\n    invocationCallbacks(options: this[\"ParsedCallOptions\"]): RequestCallbacks<any> | undefined;\n    bindTools(tools: ChatWatsonxToolType[], kwargs?: Partial<CallOptions>): Runnable<BaseLanguageModelInput, AIMessageChunk, CallOptions>;\n    scopeId(): {\n        idOrName: string;\n    } | {\n        projectId: string;\n        modelId: string;\n    } | {\n        spaceId: string;\n        modelId: string;\n    } | {\n        modelId: string;\n    };\n    completionWithRetry<T>(callback: () => T, options?: this[\"ParsedCallOptions\"]): Promise<T>;\n    _generate(messages: BaseMessage[], options: this[\"ParsedCallOptions\"], runManager?: CallbackManagerForLLMRun): Promise<ChatResult>;\n    _streamResponseChunks(messages: BaseMessage[], options: this[\"ParsedCallOptions\"], _runManager?: CallbackManagerForLLMRun): AsyncGenerator<ChatGenerationChunk>;\n    /** @ignore */\n    _combineLLMOutput(): never[];\n    withStructuredOutput<\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RunOutput extends Record<string, any> = Record<string, any>>(outputSchema: InteropZodType<RunOutput>\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n     | Record<string, any>, config?: StructuredOutputMethodOptions<false>): Runnable<BaseLanguageModelInput, RunOutput>;\n    withStructuredOutput<\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RunOutput extends Record<string, any> = Record<string, any>>(outputSchema: InteropZodType<RunOutput>\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n     | Record<string, any>, config?: StructuredOutputMethodOptions<true>): Runnable<BaseLanguageModelInput, {\n        raw: BaseMessage;\n        parsed: RunOutput;\n    }>;\n}\nexport {};\n"],"mappings":"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"}