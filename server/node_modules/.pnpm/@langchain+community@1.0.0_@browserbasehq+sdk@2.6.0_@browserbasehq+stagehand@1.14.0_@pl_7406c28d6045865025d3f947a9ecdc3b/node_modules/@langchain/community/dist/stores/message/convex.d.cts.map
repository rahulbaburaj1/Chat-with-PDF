{"version":3,"file":"convex.d.cts","names":["DocumentByName","FieldPaths","FunctionReference","GenericActionCtx","GenericDataModel","NamedTableInfo","TableNamesInDataModel","IndexNames","BaseListChatMessageHistory","BaseMessage","ConvexChatMessageHistoryInput","DataModel","TableName","SessionIdFieldName","IndexName","MessageTextFieldName","InsertMutation","LookupQuery","DeleteManyMutation","ConvexChatMessageHistory","Promise"],"sources":["../../../src/stores/message/convex.d.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { DocumentByName, FieldPaths, FunctionReference, GenericActionCtx, GenericDataModel, NamedTableInfo, TableNamesInDataModel, IndexNames } from \"convex/server\";\nimport { BaseListChatMessageHistory } from \"@langchain/core/chat_history\";\nimport { BaseMessage } from \"@langchain/core/messages\";\n/**\n * Type that defines the config required to initialize the\n * ConvexChatMessageHistory class. At minimum it needs a sessionId\n * and an ActionCtx.\n */\nexport type ConvexChatMessageHistoryInput<DataModel extends GenericDataModel, TableName extends TableNamesInDataModel<DataModel> = \"messages\", IndexName extends IndexNames<NamedTableInfo<DataModel, TableName>> = \"bySessionId\", SessionIdFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"sessionId\", MessageTextFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"message\", InsertMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    document: object;\n}> = any, LookupQuery extends FunctionReference<\"query\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}, object[]> = any, DeleteManyMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}> = any> = {\n    readonly ctx: GenericActionCtx<DataModel>;\n    readonly sessionId: DocumentByName<DataModel, TableName>[SessionIdFieldName];\n    /**\n     * Defaults to \"messages\"\n     */\n    readonly table?: TableName;\n    /**\n     * Defaults to \"bySessionId\"\n     */\n    readonly index?: IndexName;\n    /**\n     * Defaults to \"sessionId\"\n     */\n    readonly sessionIdField?: SessionIdFieldName;\n    /**\n     * Defaults to \"message\"\n     */\n    readonly messageTextFieldName?: MessageTextFieldName;\n    /**\n     * Defaults to `internal.langchain.db.insert`\n     */\n    readonly insert?: InsertMutation;\n    /**\n     * Defaults to `internal.langchain.db.lookup`\n     */\n    readonly lookup?: LookupQuery;\n    /**\n     * Defaults to `internal.langchain.db.deleteMany`\n     */\n    readonly deleteMany?: DeleteManyMutation;\n};\nexport declare class ConvexChatMessageHistory<DataModel extends GenericDataModel, SessionIdFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"sessionId\", TableName extends TableNamesInDataModel<DataModel> = \"messages\", IndexName extends IndexNames<NamedTableInfo<DataModel, TableName>> = \"bySessionId\", MessageTextFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"message\", InsertMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    document: object;\n}> = any, LookupQuery extends FunctionReference<\"query\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}, object[]> = any, DeleteManyMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}> = any> extends BaseListChatMessageHistory {\n    lc_namespace: string[];\n    private readonly ctx;\n    private readonly sessionId;\n    private readonly table;\n    private readonly index;\n    private readonly sessionIdField;\n    private readonly messageTextFieldName;\n    private readonly insert;\n    private readonly lookup;\n    private readonly deleteMany;\n    constructor(config: ConvexChatMessageHistoryInput<DataModel, TableName, IndexName, SessionIdFieldName, MessageTextFieldName, InsertMutation, LookupQuery, DeleteManyMutation>);\n    getMessages(): Promise<BaseMessage[]>;\n    addMessage(message: BaseMessage): Promise<void>;\n    clear(): Promise<void>;\n}\n"],"mappings":"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"}